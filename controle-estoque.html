<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/style-estoque.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="//cdn.rawgit.com/rainabba/jquery-table2excel/1.1.0/dist/jquery.table2excel.min.js"></script>

    <link rel="shortcut icon" href="imgs/logo sea.png" type="image/x-icon">
    <title>Controle de Estoque</title>
</head>

<body>
    <div id="header">
        <img src="imgs/logo-pagina.png" alt="Logo">
        <h1>Controle de Estoque Administrador</h1>
        <a target="_blank"href="Pagina-de-retirada.html"><button class="btn-top" type="button">Retirar do estoque<img src="imgs/seta-direita.png" alt="Seta para Direita"></button></a>
    </div>
    <div class="container">
        <form>
            <div class="form">
                <h2>Adicionar item ao estoque</h2>
                <input type="text" id="productName" placeholder="Nome do Produto" required autocomplete="off">
                <div class="input-wrapper">
                    <input type="text" id="productQuantity" placeholder="Quantidade" required autocomplete="off">
                    <button type="button" class="increase">+</button>
                    <button  type="button" class="decrease">-</button>
                </div>
                <div class="code">
                   <select name="tipo" id="type">
                    <option class="gray" value="Tipo" disable selected>Tipo</option>
                    <option class="white" value="PST">PST</option>
                    <option class="white" value="BMD">BMD</option>
                    <option class="white" value="MAC">MAC</option>
                    <option class="white" value="MAM">MAM</option>
                    <option class="white" value="DPS">DPS</option>
                   </select>
                    <input type="text" id="cod" placeholder="CÃ³digo" required autocomplete="off">
                </div>
            </form>
            <button type="submit" id="addProduct">Adicionar ao Estoque</button>
            <button id="downloadButton">Download Excel <img src="imgs/download-direto.png" alt="download"></button>
            <a class="retirada" target="_blank" href="Pagina-de-retirada.html">Retirar produto do estoque</a>
            
        </div>
    </div>

    <div id="popUp" class="modal">
        <div class="modal-content">
            <span class="fechar" id="fecharPopUp">&times;</span>
            <p>Produto adicionado com sucesso!&#10004</p>
        </div>
    </div>


    <!-- <table id="estoque">
        <tr>
            <td>Produto</td>
            <td>Quantidade</td>
        </tr>
    </table> -->

    <script>
        const selectElement = document.getElementById("type");
        const types = document.querySelector('.gray');
    
        selectElement.addEventListener("change", function () {
            const selectedOption = selectElement.options[selectElement.selectedIndex];
    
            if (selectedOption.classList.contains("white")) {
                selectElement.style.color = "white";
                types.style.color = "gray";
            } else {
                selectElement.style.color = "gray"; 
            }
        });
    </script>
    

    <script>
        
        const inputElement = document.getElementById("productQuantity");
        const decreaseButton = document.querySelector(".decrease");
        const increaseButton = document.querySelector(".increase");

        decreaseButton.addEventListener("click", () => {
            const currentValue = parseInt(inputElement.value) || 0;
            inputElement.value = Math.max(0, currentValue - 1);
        });

        increaseButton.addEventListener("click", () => {
            const currentValue = parseInt(inputElement.value) || 0;
            inputElement.value = currentValue + 1;
        });

    </script>

    <script>
        document.getElementById("addProduct").addEventListener("click", function () {
            document.getElementById("popUp").style.display = "block";
        });

        document.getElementById("fecharPopUp").addEventListener("click", function () {
            document.getElementById("popUp").style.display = "none";
        });

        window.addEventListener("click", function (event) {
            if (event.target == document.getElementById("popUp")) {
                document.getElementById("popUp").style.display = "none";
            }
        });

        document.addEventListener("DOMContentLoaded", function () {
            const addButton = document.getElementById("downloadButton");
            addButton.addEventListener("click", function () {
                addButton.disabled = true;
                const originalText = addButton.innerHTML; 

                addButton.innerHTML = "Baixando...";

                setTimeout(function () {
                    addButton.innerHTML = "Download Realizado!";

                setTimeout(function () {
                    addButton.disabled = false;
                    addButton.innerHTML = originalText; 
                }, 1500); 
            }, 1000);
        });
    });
    </script>

    <script>

        let addProduct = document.getElementById("addProduct");
        let downloadButton = document.getElementById("downloadButton");

        addProduct.addEventListener('click', () => {

            let productNameInput = document.getElementById("productName").value;
            let productQuantityInput = document.getElementById("productQuantity").value;

            let table = document.getElementById("estoque");

            let tr = document.createElement('tr');
            table.appendChild(tr);

            let item = document.createElement('td');
            item.classList.add('item');
            item.innerText = productNameInput;

            let quantity = document.createElement('td');
            quantity.classList.add('quantity');
            quantity.innerText = productQuantityInput;

            tr.append(item, quantity)


        })

        $('#downloadButton').click(function () {
            $("#estoque").table2excel({
                filename: "Estoque.xls"
            });
        });

    </script>
</body>

</html>